{"remainingRequest":"E:\\大三上\\数据库\\大作业\\frontend\\zlb1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\大三上\\数据库\\大作业\\frontend\\zlb1\\src\\components\\ChooseYes.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\大三上\\数据库\\大作业\\frontend\\zlb1\\src\\components\\ChooseYes.vue","mtime":1664681426679},{"path":"E:\\大三上\\数据库\\大作业\\frontend\\zlb1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662974870267},{"path":"E:\\大三上\\数据库\\大作业\\frontend\\zlb1\\node_modules\\babel-loader\\lib\\index.js","mtime":1662974871420},{"path":"E:\\大三上\\数据库\\大作业\\frontend\\zlb1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662974870267},{"path":"E:\\大三上\\数据库\\大作业\\frontend\\zlb1\\node_modules\\vue-loader\\lib\\index.js","mtime":1662974872279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcXMgZnJvbSAicXMiDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJDaG9vc2VZZXMiLA0KICBjb21wb25lbnRzOiB7fSwNCiAgcHJvcHM6IHt9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICAgIGNsYXNzZXM6Ww0KICAgICAgICAgICAgLy8ge25hbWU6Im9vIiwgaWQ6IjEiLCBudW06IjEwMCIsIGluZm86IumdouWQkeWvueixoSzlnKPmna/kuYvmiJgifSwNCiAgICAgICAgICAgIC8vIHtuYW1lOiJvcyIsIGlkOiIyIiwgbnVtOiIxMDAiLCBpbmZvOiLmk43kvZzns7vnu58s5oqE5bCx6KGMIn0sDQogICAgICAgICAgICAvLyB7bmFtZToiY28iLCBpZDoiMyIsIG51bToiMTAwIiwgaW5mbzoi6K6h57uELOelreelliJ9LA0KICAgICAgICAgICAgLy8ge25hbWU6ImludHJvIHRvIGFpIiwgaWQ6IjQiLCBudW06IjEwMCIsIGluZm86IuS6uuW3peaZuuiDveW8leiuuizmsLTor74ifQ0KICAgICAgICBdLA0KICAgICAgICBoZWFkQXJyOlsNCiAgICAgICAgICAgIHtsYWJlbDon6K++56iLSUQnLCBwcm9wOiJjb3Vyc2VfaWQiLCBpbmQ6MX0sDQogICAgICAgICAgICB7bGFiZWw6J+ivvueoi+WQjeensCcsIHByb3A6ImNvdXJzZV9uYW1lIiwgaW5kOjJ9LA0KICAgICAgICAgICAge2xhYmVsOifor77nqIvku4vnu40nICwgcHJvcCA6ICdjb3Vyc2VfaW50cm8nLCBpbmQ6M30sDQogICAgICAgICAgICB7bGFiZWw6J+WJqeS9meS6uuaVsCcgLCBwcm9wIDogJ2NvdXJzZV9jYXBhY2l0eScsIGluZDo0fSwNCiAgICAgICAgICAgIHtsYWJlbDon5bey6YCJ5Lq65pWwJywgcHJvcCA6ICdjb3Vyc2VfZWxlY3RlZCcsIGluZDo1fSwNCiAgICAgICAgICAgIHtsYWJlbDon5pON5L2cJywgaW5kOjZ9DQogICAgICAgIF0sDQogICAgICAgIHN0dWRlbnRfaWQ6Mg0KICAgIH07DQogIH0sDQogIHdhdGNoOiB7fSwNCiAgY29tcHV0ZWQ6IHt9LA0KICBtZXRob2RzOiB7DQogICAgICBmaW5kKCl7DQogICAgICAgICAgdGhpcy4kaHR0cCh7DQogICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLA0KICAgICAgICAgICAgICB1cmw6ICcvYXBpL3N0dWRlbnRDdXJyaWN1bHVtJywNCiAgICAgICAgICAgICAgZGF0YTogcXMuc3RyaW5naWZ5KHsNCiAgICAgICAgICAgICAgICBzdHVkZW50X2lkOnRoaXMuc3R1ZGVudF9pZA0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgIH0pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5jbGFzc2VzKQ0KICAgICAgICAgICAgICB0aGlzLmNsYXNzZXMgPSByZXMuZGF0YS5jbGFzc2VzDQogICAgICAgICAgfSkNCiAgICAgIH0sDQogICAgICBjbGlja2Nob29zZShjb3Vyc2VfaWQpew0KICAgICAgICAgIGNvbnNvbGUubG9nKGNvdXJzZV9pZCkNCiAgICAgICAgICB0aGlzLiRodHRwKHsNCiAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsDQogICAgICAgICAgICAgIHVybDogJy9hcGkvc3R1ZGVudENvdXJzZVNlbGVjdGlvbicsDQogICAgICAgICAgICAgIGRhdGE6IHFzLnN0cmluZ2lmeSh7DQogICAgICAgICAgICAgICAgY291cnNlX2lkOmNvdXJzZV9pZCwNCiAgICAgICAgICAgICAgICBzdHVkZW50X2lkOnRoaXMuc3R1ZGVudF9pZA0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgIH0pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEuc3VjY2Vzcyk7DQogICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09ICdzdWNjZXNzJyl7DQogICAgICAgICAgICAgICAgYWxlcnQoIumAieivvuaIkOWKnyIpOyANCiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2Nob29zZWNsYXNzIikgLy8g5YiH5o2i6Lev55SxDQogICAgICAgICAgICAgICAgdGhpcy5maW5kKCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAgICAgYWxlcnQoIuS6uuaVsOW3sua7oSzlkIzlrabor7fpgInmi6nlhbbku5bor77nqIshIikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgICAgdGhpcy5maW5kKCk7DQogIH0sDQogIG1vdW50ZWQoKSB7fQ0KfTsNCg=="},{"version":3,"sources":["ChooseYes.vue"],"names":[],"mappings":";AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChooseYes.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n      <h1>可选课程列表</h1>\r\n      <el-table\r\n            :data=\"classes\"\r\n            stripe\r\n            style=\"width: 100%\">\r\n            <template v-for=\"(item,index) in headArr\">\r\n                console.log(index)\r\n                <el-table-column :key=\"index\" v-if=\"item.ind===6\" :label=\"item.label\" align=\"center\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button href=\"javascript:;\" @click=\"clickchoose(scope.row.course_id)\" type=\"text\" size=\"small\">选择</el-button>\r\n                    </template>\r\n                    \r\n                    <!-- <template v-for=\"(cls,index) in classes\">\r\n                        \r\n                    </template> -->\r\n                </el-table-column>\r\n                <el-table-column :key=\"index\" v-else :prop=\"item.prop\" :label=\"item.label\" align=\"center\">\r\n                    <template scope=\"scope\">\r\n                        <span>\r\n                            {{scope.row[item.prop]}}\r\n                        </span>\r\n                    </template>\r\n                </el-table-column>\r\n            </template>    \r\n        </el-table>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport qs from \"qs\"\r\nexport default {\r\n  name: \"ChooseYes\",\r\n  components: {},\r\n  props: {},\r\n  data() {\r\n    return {\r\n        classes:[\r\n            // {name:\"oo\", id:\"1\", num:\"100\", info:\"面向对象,圣杯之战\"},\r\n            // {name:\"os\", id:\"2\", num:\"100\", info:\"操作系统,抄就行\"},\r\n            // {name:\"co\", id:\"3\", num:\"100\", info:\"计组,祭祖\"},\r\n            // {name:\"intro to ai\", id:\"4\", num:\"100\", info:\"人工智能引论,水课\"}\r\n        ],\r\n        headArr:[\r\n            {label:'课程ID', prop:\"course_id\", ind:1},\r\n            {label:'课程名称', prop:\"course_name\", ind:2},\r\n            {label:'课程介绍' , prop : 'course_intro', ind:3},\r\n            {label:'剩余人数' , prop : 'course_capacity', ind:4},\r\n            {label:'已选人数', prop : 'course_elected', ind:5},\r\n            {label:'操作', ind:6}\r\n        ],\r\n        student_id:2\r\n    };\r\n  },\r\n  watch: {},\r\n  computed: {},\r\n  methods: {\r\n      find(){\r\n          this.$http({\r\n              method: 'post',\r\n              url: '/api/studentCurriculum',\r\n              data: qs.stringify({\r\n                student_id:this.student_id\r\n              })\r\n          }).then((res) => {\r\n              console.log(res.data.classes)\r\n              this.classes = res.data.classes\r\n          })\r\n      },\r\n      clickchoose(course_id){\r\n          console.log(course_id)\r\n          this.$http({\r\n              method: 'post',\r\n              url: '/api/studentCourseSelection',\r\n              data: qs.stringify({\r\n                course_id:course_id,\r\n                student_id:this.student_id\r\n              })\r\n          }).then((res) => {\r\n            console.log(res.data.success);\r\n            if (res.data.status == 'success'){\r\n                alert(\"选课成功\"); \r\n                this.$router.push(\"/chooseclass\") // 切换路由\r\n                this.find()\r\n            }\r\n            else{\r\n                alert(\"人数已满,同学请选择其他课程!\")\r\n            }\r\n          })\r\n      }\r\n  },\r\n  created() {\r\n      this.find();\r\n  },\r\n  mounted() {}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>"]}]}