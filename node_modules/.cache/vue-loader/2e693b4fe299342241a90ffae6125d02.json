{"remainingRequest":"e:\\大三上\\数据库\\大作业\\frontend\\mix\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!e:\\大三上\\数据库\\大作业\\frontend\\mix\\src\\views\\UserInfoView.vue?vue&type=script&lang=js&","dependencies":[{"path":"e:\\大三上\\数据库\\大作业\\frontend\\mix\\src\\views\\UserInfoView.vue","mtime":1670057027467},{"path":"e:\\大三上\\数据库\\大作业\\frontend\\mix\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662974870267},{"path":"e:\\大三上\\数据库\\大作业\\frontend\\mix\\node_modules\\babel-loader\\lib\\index.js","mtime":1662974871420},{"path":"e:\\大三上\\数据库\\大作业\\frontend\\mix\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662974870267},{"path":"e:\\大三上\\数据库\\大作业\\frontend\\mix\\node_modules\\vue-loader\\lib\\index.js","mtime":1662974872279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcXMgZnJvbSAicXMiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiVXNlckluZm9WaWV3IiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdXNlcklkIDogdGhpcy4kc3RvcmUuc3RhdGUudXNlcl9pZCwNCiAgICAgIHVzZXJOYW1lIDogJ+a1geiLseaIkOWSjCcsDQogICAgICBnZW5kZXIgOiAn5aWzJywNCiAgICAgIGFnZSA6ICcyMCcsDQogICAgICBhZGRyZXNzIDogJ+WMl+S6rOiIquepuuiIquWkqeWkp+WtpicsDQogICAgICBjb250YWN0IDogJzEzM3h4eCcsDQogICAgICBkeW5hbWljVGFnczogWycxMjMnLCAnNDU2JywgJzc4OSddLA0KICAgICAgaW5wdXRWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGNoYW5naW5nOiBmYWxzZSwNCiAgICAgIGlucHV0VmFsdWU6ICcnDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldFVzZXJJbmZvKCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBoYW5kbGVDbG9zZSh0YWcpIHsNCiAgICAgIHRoaXMuZHluYW1pY1RhZ3Muc3BsaWNlKHRoaXMuZHluYW1pY1RhZ3MuaW5kZXhPZih0YWcpLCAxKTsNCiAgICB9LA0KDQogICAgc2hvd0lucHV0KCkgew0KICAgICAgdGhpcy5pbnB1dFZpc2libGUgPSB0cnVlOw0KICAgIH0sDQoNCiAgICBoYW5kbGVJbnB1dENvbmZpcm0oKSB7DQogICAgICBsZXQgaW5wdXRWYWx1ZSA9IHRoaXMuaW5wdXRWYWx1ZTsNCiAgICAgIGlmIChpbnB1dFZhbHVlKSB7DQogICAgICAgIHRoaXMuZHluYW1pY1RhZ3MucHVzaChpbnB1dFZhbHVlKTsNCiAgICAgIH0NCiAgICAgIHRoaXMuaW5wdXRWaXNpYmxlID0gZmFsc2U7DQogICAgICB0aGlzLmlucHV0VmFsdWUgPSAnJzsNCiAgICB9LA0KDQogICAgZ2V0VXNlckluZm8oKSB7DQogICAgICB0aGlzLiRodHRwKHsNCiAgICAgICAgbWV0aG9kOiAncG9zdCcsDQogICAgICAgIHVybDogJy9hcGkvZ2V0VXNlckluZm8nLCAgICAgICAvKiDmjIfmmI7lkI7nq68gYXBpIOi3r+W+hO+8jOeUseS6juWcqCBtYWluLmpzIOW3suaMh+Wumuaguei3r+W+hO+8jOWboOatpOWcqOatpOWkhOWPqumcgOWGmeebuOWvuei3r+eUsSAqLw0KICAgICAgICBkYXRhOiBxcy5zdHJpbmdpZnkoeyAgICAgIC8qIOmcgOimgeWQkeWQjuerr+S8oOi+k+eahOaVsOaNru+8jOatpOWkhOS9v+eUqCBxcy5zdHJpbmdpZnkg5bCGIGpzb24g5pWw5o2u5bqP5YiX5YyW5Lul5Y+R6YCB5ZCO56uvICovDQogICAgICAgICAgdXNlcklkIDogdGhpcy51c2VySWQsDQogICAgICAgIH0pDQogICAgICB9KS50aGVuKHJlcyA9PiB7ICAgICAgICAgICAgICAvKiByZXMg5pivIHJlc3BvbnNlIOeahOe8qeWGmSAqLw0KICAgICAgICB0aGlzLnVzZXJOYW1lID0gcmVzLmRhdGEudXNlck5hbWU7DQogICAgICAgIHRoaXMudXNlck5hbWUgPSByZXMuZGF0YS51c2VyTmFtZTsNCiAgICAgICAgdGhpcy5nZW5kZXIgPSByZXMuZGF0YS5nZW5kZXI7DQogICAgICAgIHRoaXMuYWdlID0gcmVzLmRhdGEuYWdlOw0KICAgICAgICB0aGlzLmFkZHJlc3MgPSByZXMuZGF0YS5hZGRyZXNzOw0KICAgICAgICB0aGlzLmNvbnRhY3QgPSByZXMuZGF0YS5jb250YWN0Ow0KICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7DQogICAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyhlcnIpOyAgICAgICAgIC8qIOiLpeWHuueOsOW8guW4uOWImeWcqOe7iOerr+i+k+WHuuebuOWFs+S/oeaBryAqLw0KICAgICAgICANCiAgICAgIH0pDQogICAgfSwNCiAgICB0b0NoYW5nZUluZm8oKSB7DQogICAgICB0aGlzLmNoYW5naW5nPXRydWU7DQogICAgfSwNCiAgICBjaGFuZ2VVc2VySW5mbygpIHsNCiAgICAgIC8vIHdpbmRvdy5hbGVydCgi5L+u5pS55oiQ5YqfIik7DQogICAgICB0aGlzLmNoYW5naW5nPWZhbHNlOw0KICAgICAgdGhpcy4kaHR0cCh7DQogICAgICAgIG1ldGhvZDogJ3Bvc3QnLA0KICAgICAgICB1cmw6ICcvYXBpL2NoYW5nZVVzZXJJbmZvJywgICAgICAgLyog5oyH5piO5ZCO56uvIGFwaSDot6/lvoTvvIznlLHkuo7lnKggbWFpbi5qcyDlt7LmjIflrprmoLnot6/lvoTvvIzlm6DmraTlnKjmraTlpITlj6rpnIDlhpnnm7jlr7not6/nlLEgKi8NCiAgICAgICAgZGF0YTogcXMuc3RyaW5naWZ5KHsgICAgICAvKiDpnIDopoHlkJHlkI7nq6/kvKDovpPnmoTmlbDmja7vvIzmraTlpITkvb/nlKggcXMuc3RyaW5naWZ5IOWwhiBqc29uIOaVsOaNruW6j+WIl+WMluS7peWPkemAgeWQjuerryAqLw0KICAgICAgICAgIHVzZXJJZCA6IHRoaXMudXNlcklkLA0KICAgICAgICAgIHVzZXJOYW1lIDogdGhpcy51c2VyTmFtZSwNCiAgICAgICAgICBnZW5kZXIgOiB0aGlzLmdlbmRlciwNCiAgICAgICAgICBhZ2UgOiB0aGlzLmFnZSwNCiAgICAgICAgICBhZGRyZXNzIDogdGhpcy5hZGRyZXNzLA0KICAgICAgICAgIGNvbnRhY3QgOiB0aGlzLmNvbnRhY3QsDQogICAgICAgIH0pDQogICAgICB9KS50aGVuKHJlcyA9PiB7ICAgICAgICAgICAgICAvKiByZXMg5pivIHJlc3BvbnNlIOeahOe8qeWGmSAqLw0KICAgICAgICBzd2l0Y2ggKHJlcy5kYXRhLnN0YXR1cykgew0KICAgICAgICAgIGNhc2UgInN1Y2Nlc3MiOg0KICAgICAgICAgICAgd2luZG93LmFsZXJ0KCLkv67mlLnmiJDlip8iKTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgImZhaWwiOg0KICAgICAgICAgICAgd2luZG93LmFsZXJ0KCLkv67mlLnlpLHotKUiKTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsNCiAgICAgICAgdGhpcy5nZXRVc2VySW5mbygpOw0KICAgICAgfSkuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyKTsgICAgICAgICAvKiDoi6Xlh7rnjrDlvILluLjliJnlnKjnu4jnq6/ovpPlh7rnm7jlhbPkv6Hmga8gKi8NCiAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["UserInfoView.vue"],"names":[],"mappings":";AAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserInfoView.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n  <el-header class=\"el-header\">\r\n    <div>\r\n      <el-avatar src=\"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png\">\r\n      </el-avatar>\r\n    </div>\r\n    <div>\r\n      {{userId}}\r\n    </div>\r\n  </el-header>\r\n  <el-main>\r\n    <el-tag\r\n        :key=\"tag\"\r\n        v-for=\"tag in dynamicTags\"\r\n        closable\r\n        @close=\"handleClose(tag)\">\r\n      {{tag}}\r\n    </el-tag>\r\n    <el-input\r\n        class=\"input-new-tag\"\r\n        v-if=\"inputVisible\"\r\n        v-model=\"inputValue\"\r\n        ref=\"saveTagInput\"\r\n        @keyup.enter=\"handleInputConfirm\"\r\n        @blur=\"handleInputConfirm\"\r\n    >\r\n    </el-input>\r\n    <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ New Tag</el-button>\r\n  </el-main>\r\n  <el-main>\r\n    <el-button type=\"primary\" v-if=\"!changing\" @click=\"toChangeInfo\">修改信息</el-button>\r\n    <div v-else>\r\n      <el-button type=\"primary\" @click=\"changeUserInfo\">提交修改</el-button>\r\n    </div>\r\n\r\n    <el-descriptions class=\"margin-top\" title=\"个人信息\" border>\r\n      <el-descriptions-item>\r\n        <i class=\"el-icon-user\"></i>\r\n        用户名\r\n        <el-input\r\n            class=\"input-new-tag\"\r\n            v-if=\"changing\"\r\n            v-model=\"userName\"\r\n        >\r\n        </el-input>\r\n        <slot v-else>{{userName}}</slot>\r\n      </el-descriptions-item>\r\n      <el-descriptions-item>\r\n        <i class=\"el-icon-mobile-phone\"></i>\r\n        性别\r\n        <el-input\r\n            class=\"input-new-tag\"\r\n            v-if=\"changing\"\r\n            v-model=\"gender\"\r\n        >\r\n        </el-input>\r\n        <slot v-else>{{gender}}</slot>\r\n      </el-descriptions-item>\r\n      <el-descriptions-item>\r\n        <i class=\"el-icon-location-outline\"></i>\r\n        年龄\r\n        <el-input\r\n            class=\"input-new-tag\"\r\n            v-if=\"changing\"\r\n            v-model=\"age\"\r\n        >\r\n        </el-input>\r\n        <slot v-else>{{age}}</slot>\r\n      </el-descriptions-item>\r\n      <el-descriptions-item>\r\n        <i class=\"el-icon-tickets\"></i>\r\n        联系方式\r\n        <el-input\r\n            class=\"input-new-tag\"\r\n            v-if=\"changing\"\r\n            v-model=\"contact\"\r\n        >\r\n        </el-input>\r\n        <slot v-else>{{contact}}</slot>\r\n      </el-descriptions-item>\r\n      <el-descriptions-item>\r\n        <i class=\"el-icon-office-building\"></i>\r\n        联系地址\r\n        <el-input\r\n            class=\"input-new-tag\"\r\n            v-if=\"changing\"\r\n            v-model=\"address\"\r\n        >\r\n        </el-input>\r\n        <slot v-else>{{address}}</slot>\r\n      </el-descriptions-item>\r\n    </el-descriptions>\r\n  </el-main>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport qs from \"qs\";\r\nexport default {\r\n  name: \"UserInfoView\",\r\n  data() {\r\n    return {\r\n      userId : this.$store.state.user_id,\r\n      userName : '流英成和',\r\n      gender : '女',\r\n      age : '20',\r\n      address : '北京航空航天大学',\r\n      contact : '133xxx',\r\n      dynamicTags: ['123', '456', '789'],\r\n      inputVisible: false,\r\n      changing: false,\r\n      inputValue: ''\r\n    };\r\n  },\r\n  created() {\r\n    this.getUserInfo();\r\n  },\r\n  methods: {\r\n    handleClose(tag) {\r\n      this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\r\n    },\r\n\r\n    showInput() {\r\n      this.inputVisible = true;\r\n    },\r\n\r\n    handleInputConfirm() {\r\n      let inputValue = this.inputValue;\r\n      if (inputValue) {\r\n        this.dynamicTags.push(inputValue);\r\n      }\r\n      this.inputVisible = false;\r\n      this.inputValue = '';\r\n    },\r\n\r\n    getUserInfo() {\r\n      this.$http({\r\n        method: 'post',\r\n        url: '/api/getUserInfo',       /* 指明后端 api 路径，由于在 main.js 已指定根路径，因此在此处只需写相对路由 */\r\n        data: qs.stringify({      /* 需要向后端传输的数据，此处使用 qs.stringify 将 json 数据序列化以发送后端 */\r\n          userId : this.userId,\r\n        })\r\n      }).then(res => {              /* res 是 response 的缩写 */\r\n        this.userName = res.data.userName;\r\n        this.userName = res.data.userName;\r\n        this.gender = res.data.gender;\r\n        this.age = res.data.age;\r\n        this.address = res.data.address;\r\n        this.contact = res.data.contact;\r\n        console.log(res.data);\r\n      }).catch(err => {\r\n        console.log(err);         /* 若出现异常则在终端输出相关信息 */\r\n        \r\n      })\r\n    },\r\n    toChangeInfo() {\r\n      this.changing=true;\r\n    },\r\n    changeUserInfo() {\r\n      // window.alert(\"修改成功\");\r\n      this.changing=false;\r\n      this.$http({\r\n        method: 'post',\r\n        url: '/api/changeUserInfo',       /* 指明后端 api 路径，由于在 main.js 已指定根路径，因此在此处只需写相对路由 */\r\n        data: qs.stringify({      /* 需要向后端传输的数据，此处使用 qs.stringify 将 json 数据序列化以发送后端 */\r\n          userId : this.userId,\r\n          userName : this.userName,\r\n          gender : this.gender,\r\n          age : this.age,\r\n          address : this.address,\r\n          contact : this.contact,\r\n        })\r\n      }).then(res => {              /* res 是 response 的缩写 */\r\n        switch (res.data.status) {\r\n          case \"success\":\r\n            window.alert(\"修改成功\");\r\n            break;\r\n          case \"fail\":\r\n            window.alert(\"修改失败\");\r\n            break;\r\n        }\r\n        console.log(res.data);\r\n        this.getUserInfo();\r\n      }).catch(err => {\r\n        console.log(err);         /* 若出现异常则在终端输出相关信息 */\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-header{\r\n  height: 120px;\r\n}\r\n.el-tag + .el-tag {\r\n  margin-left: 40px;\r\n  height: 32px;\r\n}\r\n.button-new-tag {\r\n  margin-left: 20px;\r\n  height: 32px;\r\n  line-height: 30px;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n}\r\n.input-new-tag {\r\n  width: 120px;\r\n  margin-left: 10px;\r\n  vertical-align: bottom;\r\n}\r\n</style>"]}]}